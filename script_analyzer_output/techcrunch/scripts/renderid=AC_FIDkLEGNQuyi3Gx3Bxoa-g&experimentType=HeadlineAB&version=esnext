function e(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function r(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e(Object(n),!0).forEach((function(e){i(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}function t(e,r,t,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,i)}function n(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function u(e){t(a,i,o,u,c,"next",e)}function c(e){t(a,i,o,u,c,"throw",e)}u(void 0)}))}}function i(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var o;function a(e,r,t,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,i)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function u(e){a(o,n,i,u,c,"next",e)}function c(e){a(o,n,i,u,c,"throw",e)}u(void 0)}))}}function c(){var e,r;return window.marfeel=null!==(e=window.marfeel)&&void 0!==e?e:{},window.marfeel.cmd=null!==(r=window.marfeel.cmd)&&void 0!==r?r:[],window.marfeel.cmd}!function(e){e.HEADLINE_AB="HeadlineAB"}(o||(o={}));var l="marfeel-sdk-store";function f(e){return e.update=Date.now(),r=l,t=btoa(JSON.stringify(e)),new Promise((e=>{c().push(["consent",n=>{try{if(n.getConsent("cookies"))return window.localStorage.setItem(r,t),e(!0)}catch(e){}return e(!1)}])}));var r,t}function s(){return p.apply(this,arguments)}function p(){return(p=u((function*(){var e,r,t=yield(e=l,new Promise((r=>{c().push(["consent",t=>{try{if(t.getConsent("cookies"))return r(window.localStorage.getItem(e))}catch(e){}return r(null)}])})));return t?JSON.parse(atob(t)):(f(r={creation:Date.now(),update:Date.now(),entries:{}}),r)}))).apply(this,arguments)}function d(e){return y.apply(this,arguments)}function y(){return(y=u((function*(e){return(yield s()).entries[e]}))).apply(this,arguments)}function v(){return(v=u((function*(e,r){var t=yield s();return t.entries[e]=r,f(t)}))).apply(this,arguments)}function m(e){return function(e){return document.querySelector('script[data-mrf-script="'.concat(e,'"]'))}(e)||function(e){var r=document.createElement("script");return r.setAttribute("type","application/json"),r.dataset.mrfScript=e,document.head.appendChild(r)}(e)}function h(e){return e&&"object"==typeof e}function w(e,r){return h(e)&&h(r)?(Object.keys(r).forEach((t=>{var n=e[t],i=r[t];Array.isArray(n)&&Array.isArray(i)?e[t]=n.concat(i):h(n)&&h(i)?e[t]=w(Object.assign({},n),i):e[t]=i})),e):r}function b(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.reduce(((e,r)=>w(e,r)),{})}var g="croupier-experimentation-entry",O={percent:function(){var e=n((function*(e){var r=Math.random();for(var t of e)if((r-=t.strategy.value)<=0)return t;return e[e.length-1]}));return function(r){return e.apply(this,arguments)}}()},P=function(){var e=n((function*(e,t){if(Array.isArray(t)&&0!==t.length){var n=(yield d(g))||{};if(n[e])return t.find((r=>r.id===n[e]));if(!t.some((e=>!e.strategy))){var i=t[0].strategy,o=O[i.type],a=yield o(t);return yield function(e,r){return v.apply(this,arguments)}(g,r(r({},(yield d(g))||{}),{},{[e]:a.id})),a}}}));return function(r,t){return e.apply(this,arguments)}}(),j=(e,r)=>{window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",t=>{t.resolve(e,r)}])},E=()=>{j("experimentationFailed")},A=function(){var e=n((function*(){if(window.location.search.includes("activate-overlay=true"))return!0;var e=yield d("compass-overlay");return!(null==e||!e.active)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=n((function*(e){return"FINISHED"===e.status?e.variants.sort(((e,r)=>{var t,n;return((null===(t=r.result)||void 0===t?void 0:t.ctr)||0)-((null===(n=e.result)||void 0===n?void 0:n.ctr)||0)}))[0]:P(e.id||"",e.variants)}));return function(r){return e.apply(this,arguments)}}(),D=function(){var e=n((function*(e){var r,t=yield Promise.all(e.map(function(){var e=n((function*(e){var r=yield S(e);return r?b({id:r.id,status:e.status,applyChangesOnFinish:!!e.applyChangesOnFinish},e.detail,r.detail||{}):{}}));return function(r){return e.apply(this,arguments)}}())),i={headlines:t.filter((e=>{return r=e,!(0===Object.keys(r).length);var r}))};0===i.headlines.length||(yield A())?j("headline",!1):(r=i,m("experimentation-headlineab").innerHTML=JSON.stringify(r))}));return function(r){return e.apply(this,arguments)}}(),x={[o.HEADLINE_AB]:D},N=function(){var e=n((function*(e){var t,n=e.reduce(((e,t)=>r(r({},e),{},{[t.experimentType]:[...e[t.experimentType]||[],t]})),{});t=e.length>0,j("experimentation",t),yield Promise.all(Object.values(o).map((e=>(e=>x[e])(e)(n[e]||[]))))}));return function(r){return e.apply(this,arguments)}}();!function(){try{N([])}catch(e){E()}}();